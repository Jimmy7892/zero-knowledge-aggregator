# =============================================================================
# TRACK RECORD ENCLAVE - ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and configure with your actual values
# NEVER commit .env to Git
# =============================================================================

# -----------------------------------------------------------------------------
# ENCLAVE CONFIGURATION
# -----------------------------------------------------------------------------
# Enable enclave mode (set to true in production AMD SEV-SNP VM)
ENCLAVE_MODE=true

# AMD SEV-SNP attestation (set to true only on SEV-SNP capable hardware)
AMD_SEV_SNP=false

# gRPC server port (internal network only, NOT exposed to internet)
ENCLAVE_PORT=50051

# -----------------------------------------------------------------------------
# DATABASE (Enclave User - Full Access)
# -----------------------------------------------------------------------------
# PostgreSQL connection string for Enclave
# This user MUST have full access to all tables including 'trades'
DATABASE_URL="postgresql://enclave_user:your_password@localhost:5433/aggregator_db"

# -----------------------------------------------------------------------------
# SECURITY (CRITICAL - REQUIRED)
# -----------------------------------------------------------------------------
# 32-byte encryption key for decrypting user credentials
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY="0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef"

# JWT Secret for authentication tokens
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET="your-secure-jwt-secret-change-this-in-production-minimum-32-chars"

# -----------------------------------------------------------------------------
# LOGGING
# -----------------------------------------------------------------------------
# Log level (error, warn, info, debug)
LOG_LEVEL="info"

# Enable detailed query logging (true/false)
QUERY_LOGGING="false"

# -----------------------------------------------------------------------------
# EXCHANGE API CREDENTIALS (Optional - for development)
# -----------------------------------------------------------------------------
# These are typically stored encrypted in the database
# Only set these for local development testing

# Interactive Brokers OAuth
# IBKR_CLIENT_ID="your_ibkr_client_id"
# IBKR_CLIENT_SECRET="your_ibkr_client_secret"
# IBKR_REDIRECT_URI="http://localhost:3010/api/exchanges/ibkr/callback"

# -----------------------------------------------------------------------------
# ATTESTATION (Production Only)
# -----------------------------------------------------------------------------
# SEV-SNP attestation report endpoint
# ATTESTATION_ENDPOINT="http://169.254.169.254/metadata/instance/compute/attestation"

# TLS certificates for gRPC (mutual TLS in production)
# TLS_CA_CERT="/etc/enclave/ca.crt"
# TLS_SERVER_CERT="/etc/enclave/server.crt"
# TLS_SERVER_KEY="/etc/enclave/server.key"

# -----------------------------------------------------------------------------
# DEVELOPMENT ONLY
# -----------------------------------------------------------------------------
# Enable debug mode
# DEBUG="true"

# Node environment
NODE_ENV="development"